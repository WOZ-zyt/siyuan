{
	"ID": "20221012145133-gfk43hj",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20221012145133-gfk43hj",
		"scroll": "{\u0026amp;quot;startId\u0026amp;quot;:\u0026amp;quot;20221012145133-msptxw7\u0026amp;quot;,\u0026amp;quot;endId\u0026amp;quot;:\u0026amp;quot;20221012145133-msptxw7\u0026amp;quot;,\u0026amp;quot;scrollTop\u0026amp;quot;:0}",
		"title": "\u0026quot;大事件项目\u0026quot; 接口文档开发",
		"updated": "20221013211728"
	},
	"Children": [
		{
			"ID": "20221012204620-r1vaxtm",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221012204620-r1vaxtm",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Headline"
				}
			]
		},
		{
			"ID": "20221012204620-ifmxovq",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-ifmxovq",
				"updated": "20221012205009"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-98jxzpz",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-98jxzpz",
						"updated": "20221012204715"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "大事件后台 API 项目，API 接口文档请参考"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "a",
							"TextMarkAHref": "https://www.showdoc.cc/escook?page_id=3707158761215217",
							"TextMarkTextContent": "https://www.showdoc.cc/escook?page_id=3707158761215217"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-jqir71b",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221012204620-jqir71b",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1. 初始化"
				}
			]
		},
		{
			"ID": "20221012204620-vt7ol5c",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-vt7ol5c",
				"updated": "20221012205038"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.1 创建项目 "
				}
			]
		},
		{
			"ID": "20221012204620-ry84rtj",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ry84rtj",
				"updated": "20221012204726"
			},
			"Children": [
				{
					"ID": "20221012204620-ywpiov3",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-ywpiov3",
						"updated": "20221012204726"
					},
					"Children": [
						{
							"ID": "20221012204620-at40mgs",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-at40mgs",
								"updated": "20221012204726"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "新建"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "api_server"
								},
								{
									"Type": "NodeText",
									"Data": "​ 文件夹作为项目根目录，并在项目根目录中运行如下的命令，初始化包管理配置文件："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-atwjgun",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-atwjgun",
				"updated": "20221012215218"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "npm init -y\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-zgxl8qq",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-zgxl8qq",
				"updated": "20221012204722"
			},
			"Children": [
				{
					"ID": "20221012204620-v6v1rj9",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-v6v1rj9",
						"updated": "20221012204722"
					},
					"Children": [
						{
							"ID": "20221012204620-911wz9q",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-911wz9q",
								"updated": "20221012204722"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "运行如下的命令，安装特定版本的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "express"
								},
								{
									"Type": "NodeText",
									"Data": "​："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-4rozihh",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-4rozihh",
				"updated": "20221012215216"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "npm i express@4.17.1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-jydp8k7",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-jydp8k7",
				"updated": "20221012204729"
			},
			"Children": [
				{
					"ID": "20221012204620-r4b5mt9",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-r4b5mt9",
						"updated": "20221012204729"
					},
					"Children": [
						{
							"ID": "20221012204620-4cvfx7u",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-4cvfx7u",
								"updated": "20221012204729"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在项目根目录中新建"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 作为整个项目的入口文件，并初始化如下的代码："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-8p5i01l",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-8p5i01l",
				"updated": "20221012215210"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入 express 模块\nconst express = require('express')\n// 创建 express 的服务器实例\nconst app = express()\n​\n// write your code here...\n​\n// 调用 app.listen 方法，指定端口号并启动web服务器\napp.listen(3007, function () {\n  console.log('api server running at http://127.0.0.1:3007')\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-dr2dxeu",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-dr2dxeu",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.2 配置 cors 跨域"
				}
			]
		},
		{
			"ID": "20221012204620-8cw8dja",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-8cw8dja",
				"updated": "20221012204732"
			},
			"Children": [
				{
					"ID": "20221012204620-bdrcqgv",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-bdrcqgv",
						"updated": "20221012204732"
					},
					"Children": [
						{
							"ID": "20221012204620-n9va5fj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-n9va5fj",
								"updated": "20221012204732"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "运行如下的命令，安装"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "cors"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中间件："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-1v5655d",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-1v5655d",
				"updated": "20221012215207"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "npm i cors@2.8.5\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-v97462y",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-v97462y",
				"updated": "20221012204734"
			},
			"Children": [
				{
					"ID": "20221012204620-zkifbck",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-zkifbck",
						"updated": "20221012204734"
					},
					"Children": [
						{
							"ID": "20221012204620-plwwb5j",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-plwwb5j",
								"updated": "20221012204734"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中导入并配置 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "cors"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中间件："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-taqhv7o",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-taqhv7o",
				"updated": "20221012215204"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入 cors 中间件\nconst cors = require('cors')\n// 将 cors 注册为全局中间件\napp.use(cors())\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-hdxtofw",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-hdxtofw",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.3 配置解析表单数据的中间件"
				}
			]
		},
		{
			"ID": "20221012204620-rf2ue99",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-rf2ue99",
				"updated": "20221012205046"
			},
			"Children": [
				{
					"ID": "20221012204620-uk67q1u",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-uk67q1u",
						"updated": "20221012205046"
					},
					"Children": [
						{
							"ID": "20221012204620-dpsx9ct",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-dpsx9ct",
								"updated": "20221012205046"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "通过如下的代码，配置解析"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "application/x-www-form-urlencoded"
								},
								{
									"Type": "NodeText",
									"Data": "​ 格式的表单数据的中间件："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-04xi7ao",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-04xi7ao",
				"updated": "20221012215201"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "app.use(express.urlencoded({ extended: false }))\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-ih3plnv",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-ih3plnv",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.4 初始化路由相关的文件夹"
				}
			]
		},
		{
			"ID": "20221012204620-wt88g04",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-wt88g04",
				"updated": "20221012205053"
			},
			"Children": [
				{
					"ID": "20221012204620-a2ctae5",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-a2ctae5",
						"updated": "20221012205051"
					},
					"Children": [
						{
							"ID": "20221012204620-ckb53z1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ckb53z1",
								"updated": "20221012205051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在项目根目录中，新建"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "router"
								},
								{
									"Type": "NodeText",
									"Data": "​ 文件夹，用来存放所有的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "路由"
								},
								{
									"Type": "NodeText",
									"Data": "​模块"
								}
							]
						},
						{
							"ID": "20221012204620-4yalf2g",
							"Type": "NodeBlockquote",
							"Properties": {
								"id": "20221012204620-4yalf2g",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeBlockquoteMarker",
									"Data": "\u003e"
								},
								{
									"ID": "20221012204620-8r0ven5",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221012204620-8r0ven5",
										"updated": "20221012204620"
									},
									"Children": [
										{
											"Type": "NodeTextMark",
											"TextMarkType": "strong",
											"TextMarkTextContent": "路由模块中，只存放客户端的请求与处理函数之间的映射关系"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-kfmuwqx",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-kfmuwqx",
						"updated": "20221012205053"
					},
					"Children": [
						{
							"ID": "20221012204620-29yh3fg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-29yh3fg",
								"updated": "20221012205053"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在项目根目录中，新建"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "router_handler"
								},
								{
									"Type": "NodeText",
									"Data": "​ 文件夹，用来存放所有的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "路由处理函数模块"
								},
								{
									"Type": "NodeText",
									"Data": "​"
								}
							]
						},
						{
							"ID": "20221012204620-cq1eu1f",
							"Type": "NodeBlockquote",
							"Properties": {
								"id": "20221012204620-cq1eu1f",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeBlockquoteMarker",
									"Data": "\u003e"
								},
								{
									"ID": "20221012204620-y8wkcya",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221012204620-y8wkcya",
										"updated": "20221012204620"
									},
									"Children": [
										{
											"Type": "NodeTextMark",
											"TextMarkType": "strong",
											"TextMarkTextContent": "路由处理函数模块中，专门负责存放每个路由对应的处理函数"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-9sn2b3q",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-9sn2b3q",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.5 初始化用户路由模块"
				}
			]
		},
		{
			"ID": "20221012204620-rgu34ti",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-rgu34ti",
				"updated": "20221012205058"
			},
			"Children": [
				{
					"ID": "20221012204620-vkcty5g",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-vkcty5g",
						"updated": "20221012205058"
					},
					"Children": [
						{
							"ID": "20221012204620-19b31m2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-19b31m2",
								"updated": "20221012205058"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "router"
								},
								{
									"Type": "NodeText",
									"Data": "​ 文件夹中，新建 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "user.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 文件，作为用户的路由模块，并初始化代码如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-j69194l",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-j69194l",
				"updated": "20221012215158"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const express = require('express')\n// 创建路由对象\nconst router = express.Router()\n​\n// 注册新用户\nrouter.post('/reguser', (req, res) =\u003e {\n  res.send('reguser OK')\n})\n​\n// 登录\nrouter.post('/login', (req, res) =\u003e {\n  res.send('login OK')\n})\n​\n// 将路由对象共享出去\nmodule.exports = router\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-5rdkiw7",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-5rdkiw7",
				"updated": "20221012213159"
			},
			"Children": [
				{
					"ID": "20221012204620-jws72aa",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-jws72aa",
						"updated": "20221012213159"
					},
					"Children": [
						{
							"ID": "20221012204620-s88l70g",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-s88l70g",
								"updated": "20221012213159"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中，导入并使用 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "用户路由模块"
								},
								{
									"Type": "NodeText",
									"Data": "​ ："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-tkoeg6d",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-tkoeg6d",
				"updated": "20221012215156"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入并注册用户路由模块\nconst userRouter = require('./router/user')\napp.use('/api', userRouter)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-e8ffnce",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-e8ffnce",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.6 抽离用户路由模块中的处理函数"
				}
			]
		},
		{
			"ID": "20221012204620-jr02bqw",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-jr02bqw",
				"updated": "20221012205105"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-1deonwm",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-1deonwm",
						"updated": "20221012205105"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "目的：为了保证"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "路由模块"
						},
						{
							"Type": "NodeText",
							"Data": "​ 的纯粹性，所有的 "
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "路由处理函数"
						},
						{
							"Type": "NodeText",
							"Data": "​，必须抽离到对应的 "
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "路由处理函数模块"
						},
						{
							"Type": "NodeText",
							"Data": "​ 中"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-yfy3wmt",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-yfy3wmt",
				"updated": "20221012205107"
			},
			"Children": [
				{
					"ID": "20221012204620-1fh93lh",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-1fh93lh",
						"updated": "20221012205107"
					},
					"Children": [
						{
							"ID": "20221012204620-1vvqylr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-1vvqylr",
								"updated": "20221012205107"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/user.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中，使用 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "exports"
								},
								{
									"Type": "NodeText",
									"Data": "​ 对象，分别向外共享如下两个 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "路由处理函数"
								},
								{
									"Type": "NodeText",
									"Data": "​ ："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-ojzu4gs",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-ojzu4gs",
				"updated": "20221012215151"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/**\n * 在这里定义和用户相关的路由处理函数，供 /router/user.js 模块进行调用\n */\n​\n// 注册用户的处理函数\nexports.regUser = (req, res) =\u003e {\n  res.send('reguser OK')\n}\n​\n// 登录的处理函数\nexports.login = (req, res) =\u003e {\n  res.send('login OK')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-49sahcc",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-49sahcc",
				"updated": "20221012213133"
			},
			"Children": [
				{
					"ID": "20221012204620-dt0260f",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-dt0260f",
						"updated": "20221012213133"
					},
					"Children": [
						{
							"ID": "20221012204620-9pljap4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-9pljap4",
								"updated": "20221012213133"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "将/router/user.js 中的代码修改为如下结构"
								},
								{
									"Type": "NodeText",
									"Data": "："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-jpvf2jc",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-jpvf2jc",
				"updated": "20221012215148"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const express = require('express')\nconst router = express.Router()\n​\n// 导入用户路由处理函数模块\nconst userHandler = require('../router_handler/user')\n​\n// 注册新用户\nrouter.post('/reguser', userHandler.regUser)\n// 登录\nrouter.post('/login', userHandler.login)\n​\nmodule.exports = router\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-do6ha39",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221012204620-do6ha39",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2. 登录注册"
				}
			]
		},
		{
			"ID": "20221012204620-h2i6w98",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-h2i6w98",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.1 新建 ev_users 表"
				}
			]
		},
		{
			"ID": "20221012204620-05awlzz",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-05awlzz",
				"updated": "20221012213113"
			},
			"Children": [
				{
					"ID": "20221012204620-yvjiwsg",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-yvjiwsg",
						"updated": "20221012213113"
					},
					"Children": [
						{
							"ID": "20221012204620-aas6ooo",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-aas6ooo",
								"updated": "20221012213113"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在my_db_01数据库中，新建  表如下：ev_users"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012213048-0n2uisd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221012213048-0n2uisd",
				"updated": "20221012213051"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20221012213051-3l0piwt.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20221012204620-5u6gz75",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-5u6gz75",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.2 安装并配置 mysql 模块"
				}
			]
		},
		{
			"ID": "20221012204620-ylm1pdd",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-ylm1pdd",
				"updated": "20221012213119"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-468ez4i",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-468ez4i",
						"updated": "20221012213119"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "在 API 接口项目中，需要安装并配置"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "mysql"
						},
						{
							"Type": "NodeText",
							"Data": "​ 这个第三方模块，来连接和操作 MySQL 数据库"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-dgsyy88",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-dgsyy88",
				"updated": "20221012205114"
			},
			"Children": [
				{
					"ID": "20221012204620-vwqs651",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-vwqs651",
						"updated": "20221012205114"
					},
					"Children": [
						{
							"ID": "20221012204620-dv6hbxd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-dv6hbxd",
								"updated": "20221012205114"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "运行如下命令，安装"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "mysql"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-i39k5af",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-i39k5af",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "npm i mysql@2.18.1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-ezum7u3",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ezum7u3",
				"updated": "20221012214428"
			},
			"Children": [
				{
					"ID": "20221012204620-9n3vxag",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-9n3vxag",
						"updated": "20221012214428"
					},
					"Children": [
						{
							"ID": "20221012204620-75r67um",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-75r67um",
								"updated": "20221012214428"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在项目根目录中新建"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/db/index.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 文件，在此自定义模块中创建数据库的连接对象："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-kpkch2u",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-kpkch2u",
				"updated": "20221012215449"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入 mysql 模块\nconst mysql = require('mysql')\n​\n// 创建数据库连接对象\nconst db = mysql.createPool({\n  host: '127.0.0.1',\n  user: 'root',\n  password: 'admin123',\n  database: 'my_db_01',\n})\n​\n// 向外共享 db 数据库连接对象\nmodule.exports = db\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-3etjmlf",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-3etjmlf",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.3 注册"
				}
			]
		},
		{
			"ID": "20221012204620-qokil5s",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-qokil5s",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.3.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-sac9h8d",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-sac9h8d",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-9y7m8n6",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-9y7m8n6",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-u7vudst",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-u7vudst",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "检测表单数据是否合法"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-r2nc42d",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-r2nc42d",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-ea5abcs",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ea5abcs",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "检测用户名是否被占用"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-aazei00",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-aazei00",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-2w19mpl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-2w19mpl",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "对密码进行加密处理"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-js4vkey",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-js4vkey",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-ukq3fs7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ukq3fs7",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "插入新用户"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-sn77afp",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-sn77afp",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.3.1 检测表单数据是否合法"
				}
			]
		},
		{
			"ID": "20221012204620-8wgvvak",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-8wgvvak",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-a1ki65e",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-a1ki65e",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-9htjou5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-9htjou5",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "判断用户名和密码是否为空"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-xj0el3i",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-xj0el3i",
				"updated": "20221012215457"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 注册用户的处理函\nexports.regUser = (req, res) =\u003e {\n  // 接收表单数据\n  const userinfo = req.body;\n  // 判断数据是否合法\n  if (!userinfo.username || !userinfo.password) {\n    return res.send({ status: 1, message: \"用户名或密码不能为空！\" });\n  }\n  res.send('reguser OK')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-yhngdxn",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-yhngdxn",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.3.2 检测用户名是否被占用"
				}
			]
		},
		{
			"ID": "20221012204620-76g38da",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-76g38da",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-tvm57q2",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-tvm57q2",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-dekbij2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-dekbij2",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "导入数据库操作模块："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-thmo60d",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-thmo60d",
				"updated": "20221012224012"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const db = require('../db/index')\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-sdo0c5u",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-sdo0c5u",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-wi2a90p",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-wi2a90p",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-5hhhsfd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-5hhhsfd",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012224259-jui6dcb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221012224259-jui6dcb",
				"updated": "20221012224312"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "select查询语句的results返回值是数组"
				},
				{
					"Type": "NodeText",
					"Data": "​​"
				}
			]
		},
		{
			"ID": "20221012204620-ziv0qlv",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-ziv0qlv",
				"updated": "20221012224015"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const sql = `select * from ev_users where username=?`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-fs03bjh",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-fs03bjh",
				"updated": "20221012224341"
			},
			"Children": [
				{
					"ID": "20221012204620-06ztefa",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-06ztefa",
						"updated": "20221012224341"
					},
					"Children": [
						{
							"ID": "20221012204620-iwthby5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-iwthby5",
								"updated": "20221012224341"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "执行 SQL 语句并根据结果判断用户名是否被占用： "
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-jfpp1j2",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-jfpp1j2",
				"updated": "20221012224017"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.query(sql, [userinfo.username], function (err, results) {\n  // 执行 SQL 语句失败\n  if (err) {\n    return res.send({ status: 1, message: err.message })\n  }\n  // 用户名被占用\n  if (results.length \u003e 0) {\n    return res.send({ status: 1, message: '用户名被占用，请更换其他用户名！' })\n  }\n  // TODO: 用户名可用，继续后续流程...\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-upf7i9h",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-upf7i9h",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.3.3 对密码进行加密处理"
				}
			]
		},
		{
			"ID": "20221012204620-21ycs5l",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-21ycs5l",
				"updated": "20221012230617"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-dsyp75y",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-dsyp75y",
						"updated": "20221012230617"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "为了保证密码的安全性，不建议在数据库以 "
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "明文"
						},
						{
							"Type": "NodeText",
							"Data": "​ 的形式保存用户密码，推荐对密码进行 "
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "加密存储"
						},
						{
							"Type": "NodeText",
							"Data": "​"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-yrnft7b",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20221012204620-yrnft7b",
				"updated": "20221012204620"
			}
		},
		{
			"ID": "20221012204620-k5yfesx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221012204620-k5yfesx",
				"updated": "20221012230623"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "在当前项目中，使用"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "bcryptjs"
				},
				{
					"Type": "NodeText",
					"Data": "​ 对用户密码进行加密，优点："
				}
			]
		},
		{
			"ID": "20221012204620-qb137jn",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221012204620-qb137jn",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-6hpg1jz",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221012204620-6hpg1jz",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-75ollzo",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-75ollzo",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "加密之后的密码，****无法被逆向破解"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-rc43eg9",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221012204620-rc43eg9",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-on8nmki",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-on8nmki",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "同一明文密码多次加密，得到的****加密结果各不相同"
								},
								{
									"Type": "NodeText",
									"Data": "，保证了安全性"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-op4iq5t",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20221012204620-op4iq5t",
				"updated": "20221012204620"
			}
		},
		{
			"ID": "20221012204620-k5ozpn5",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-k5ozpn5",
				"updated": "20221012230753"
			},
			"Children": [
				{
					"ID": "20221012204620-vro3xr5",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-vro3xr5",
						"updated": "20221012230753"
					},
					"Children": [
						{
							"ID": "20221012204620-tceoned",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-tceoned",
								"updated": "20221012230753"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "运行如下命令，安装指定版本的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "bcryptjs"
								},
								{
									"Type": "NodeText",
									"Data": "​ ："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-7vvzcap",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-7vvzcap",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "npm i bcryptjs@2.4.3\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-hsruenf",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-hsruenf",
				"updated": "20221012230746"
			},
			"Children": [
				{
					"ID": "20221012204620-pimtax6",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-pimtax6",
						"updated": "20221012230746"
					},
					"Children": [
						{
							"ID": "20221012204620-lhcxs7b",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-lhcxs7b",
								"updated": "20221012230746"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/user.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中，导入 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "bcryptjs"
								},
								{
									"Type": "NodeText",
									"Data": "​ ："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-w8h7sz3",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-w8h7sz3",
				"updated": "20221012230756"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const bcrypt = require('bcryptjs')\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-he9d4pl",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-he9d4pl",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-zt8agaf",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-zt8agaf",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-8rf3rt1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-8rf3rt1",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在注册用户的处理函数中，确认用户名可用之后，调用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "bcrypt.hashSync(明文密码, 随机盐的长度)"
								},
								{
									"Type": "NodeText",
									"Data": "​ 方法，对用户的密码进行加密处理："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-fyaj9lr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-fyaj9lr",
				"updated": "20221012230829"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 对用户的密码,进行 bcrype 加密，返回值是加密之后的密码字符串\nuserinfo.password = bcrypt.hashSync(userinfo.password, 10)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-wxwo7zi",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-wxwo7zi",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.3.4 插入新用户"
				}
			]
		},
		{
			"ID": "20221012204620-smor1ir",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-smor1ir",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-w1rcadi",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-w1rcadi",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-tqnf7fy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-tqnf7fy",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义插入用户的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-6kr5hd9",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-6kr5hd9",
				"updated": "20221012231304"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const sql = 'insert into ev_users set ?'\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-bl2izsj",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-bl2izsj",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-1bqk48h",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-1bqk48h",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-pz35w9l",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-pz35w9l",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**调用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行 SQL 语句，插入新用户："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-a7r1ufa",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-a7r1ufa",
				"updated": "20221012231311"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.query(sql, { username: userinfo.username, password: userinfo.password }, function (err, results) {\n  // 执行 SQL 语句失败\n  if (err) return res.send({ status: 1, message: err.message })\n  // SQL 语句执行成功，但影响行数不为 1\n  if (results.affectedRows !== 1) {\n    return res.send({ status: 1, message: '注册用户失败，请稍后再试！' })\n  }\n  // 注册成功\n  res.send({ status: 0, message: '注册成功！' })\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-gm1dxdv",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-gm1dxdv",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.4 优化 res.send() 代码"
				}
			]
		},
		{
			"ID": "20221012204620-1x1bbtz",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-1x1bbtz",
				"updated": "20221012231921"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-rks17lg",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-rks17lg",
						"updated": "20221012231921"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "在处理函数中，需要多次调用"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "res.send()"
						},
						{
							"Type": "NodeText",
							"Data": "​ 向客户端响应 "
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "处理失败"
						},
						{
							"Type": "NodeText",
							"Data": "​ 的结果，为了简化代码，可以手动封装一个 res.cc() 函数"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-08xvzbq",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-08xvzbq",
				"updated": "20221012231919"
			},
			"Children": [
				{
					"ID": "20221012204620-udr488s",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-udr488s",
						"updated": "20221012231919"
					},
					"Children": [
						{
							"ID": "20221012204620-7dfazz6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-7dfazz6",
								"updated": "20221012231919"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中，所有路由之前，声明一个全局中间件，为 res 对象挂载一个 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "res.cc()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 函数 ："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-ll2t2v0",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-ll2t2v0",
				"updated": "20221012231913"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 响应数据的中间件\napp.use(function (req, res, next) {\n  // status = 0 为成功； status = 1 为失败； 默认将 status 的值设置为 1，方便处理失败的情况\n  res.cc = function (err, status = 1) {\n    res.send({\n      // 状态\n      status,\n      // 状态描述，判断 err 是 错误对象 还是 字符串\n      message: err instanceof Error ? err.message : err,\n    })\n  }\n  next()\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-f9egat6",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-f9egat6",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.5 优化表单数据验证"
				}
			]
		},
		{
			"ID": "20221012204620-usswsfa",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-usswsfa",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-zfst8dt",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-zfst8dt",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "表单验证的原则：前端验证为辅，后端验证为主，后端****永远不要相信"
						},
						{
							"Type": "NodeText",
							"Data": "前端提交过来的"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "任何内容"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-u4b3yhu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221012204620-u4b3yhu",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "在实际开发中，前后端都需要对表单的数据进行合法性的验证，而且，****后端做为数据合法性验证的最后一个关口"
				},
				{
					"Type": "NodeText",
					"Data": "，在拦截非法数据方面，起到了至关重要的作用。"
				}
			]
		},
		{
			"ID": "20221012204620-72wrwqt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221012204620-72wrwqt",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "单纯的使用 第三方数据验证模块"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong strong",
					"TextMarkTextContent": " 的形式对数据合法性进行验证，效率低下、出错率高、维护性差。因此，推荐使用"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong strong code",
					"TextMarkTextContent": "if...else..."
				},
				{
					"Type": "NodeText",
					"Data": "​，来降低出错率、提高验证的效率与可维护性，"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "让后端程序员把更多的精力放在核心业务逻辑的处理上"
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221012204620-h2i7cig",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-h2i7cig",
				"updated": "20221012233236"
			},
			"Children": [
				{
					"ID": "20221012204620-x0j0uvq",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-x0j0uvq",
						"updated": "20221012233236"
					},
					"Children": [
						{
							"ID": "20221012204620-covr8vc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-covr8vc",
								"updated": "20221012233236"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "安装"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "@hapi/joi"
								},
								{
									"Type": "NodeText",
									"Data": "​ 包，为表单中携带的每个数据项，定义验证规则："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-4pzoqq2",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-4pzoqq2",
				"updated": "20221012233319"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "npm install @hapi/joi@17.1.0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-wimkqyu",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-wimkqyu",
				"updated": "20221012233248"
			},
			"Children": [
				{
					"ID": "20221012204620-ud5vpkm",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-ud5vpkm",
						"updated": "20221012233248"
					},
					"Children": [
						{
							"ID": "20221012204620-hsyn3gj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-hsyn3gj",
								"updated": "20221012233248"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "安装"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "@escook/express-joi"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中间件，来实现自动对表单数据进行验证的功能："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-x36c43d",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-x36c43d",
				"updated": "20221012233317"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "npm i @escook/express-joi\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-wikmzr2",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-wikmzr2",
				"updated": "20221012234549"
			},
			"Children": [
				{
					"ID": "20221012204620-k7t0kko",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-k7t0kko",
						"updated": "20221012234549"
					},
					"Children": [
						{
							"ID": "20221012204620-zq5sxcv",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-zq5sxcv",
								"updated": "20221012234549"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "新建"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/schema/user.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 用户信息验证规则模块，并初始化代码如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-chvmbt4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-chvmbt4",
				"updated": "20221012233314"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const joi = require('@hapi/joi')\n​\n/**\n * string() 值必须是字符串\n * alphanum() 值只能是包含 a-zA-Z0-9 的字符串\n * min(length) 最小长度\n * max(length) 最大长度\n * required() 值是必填项，不能为 undefined\n * pattern(正则表达式) 值必须符合正则表达式的规则\n */\n​\n// 用户名的验证规则\nconst username = joi.string().alphanum().min(1).max(10).required()\n// 密码的验证规则\nconst password = joi\n  .string()\n  .pattern(/^[\\S]{6,12}$/)\n  .required()\n​\n// 注册和登录表单的验证规则对象\nexports.reg_login_schema = {\n  // 表示需要对 req.body 中的数据进行验证\n  body: {\n    username,\n    password,\n  },\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-xy5ior8",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-xy5ior8",
				"updated": "20221012234737"
			},
			"Children": [
				{
					"ID": "20221012204620-nn80kyf",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-nn80kyf",
						"updated": "20221012234737"
					},
					"Children": [
						{
							"ID": "20221012204620-8i2pfo4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-8i2pfo4",
								"updated": "20221012234737"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "修改"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/user.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中的代码如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-szquqde",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-szquqde",
				"updated": "20221012233311"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const express = require('express')\nconst router = express.Router()\n​\n// 导入用户路由处理函数模块\nconst userHandler = require('../router_handler/user')\n​\n// 1. 导入验证表单数据的中间件\nconst expressJoi = require('@escook/express-joi')\n// 2. 导入需要的验证规则对象\nconst { reg_login_schema } = require('../schema/user')\n​\n// 注册新用户\n// 3. 在注册新用户的路由中，声明局部中间件，对当前请求中携带的数据进行验证\n// 3.1 数据验证通过后，会把这次请求流转给后面的路由处理函数\n// 3.2 数据验证失败后，终止后续代码的执行，并抛出一个全局的 Error 错误，进入全局错误级别中间件中进行处理\nrouter.post('/reguser', expressJoi(reg_login_schema), userHandler.regUser)\n// 登录\nrouter.post('/login', userHandler.login)\n​\nmodule.exports = router\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-5lcb62f",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-5lcb62f",
				"updated": "20221012234408"
			},
			"Children": [
				{
					"ID": "20221012204620-ezqq6l4",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20221012204620-ezqq6l4",
						"updated": "20221012234408"
					},
					"Children": [
						{
							"ID": "20221012204620-zc9amos",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-zc9amos",
								"updated": "20221012234408"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的全局错误级别中间件中，捕获验证失败的错误，并把验证失败的结果响应给客户端："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-pw2he9k",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-pw2he9k",
				"updated": "20221012233306"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const joi = require('@hapi/joi')\n​\n// 错误中间件\napp.use(function (err, req, res, next) {\n  // 数据验证失败\n  if (err instanceof joi.ValidationError) return res.cc(err)\n  // 未知错误\n  res.cc(err)\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-sh7qodu",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-sh7qodu",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.6 登录"
				}
			]
		},
		{
			"ID": "20221012204620-634marp",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-634marp",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.6.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-8fygr7c",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-8fygr7c",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-qqfrahh",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-qqfrahh",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-6qvdivh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-6qvdivh",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "检测表单数据是否合法"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-yoiue6v",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-yoiue6v",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-9d68w91",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-9d68w91",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "根据用户名查询用户的数据"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-nimigpi",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-nimigpi",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-db4xohs",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-db4xohs",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "判断用户输入的密码是否正确"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-9s3dehr",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-9s3dehr",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-s4m1io9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-s4m1io9",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "生成 JWT 的 Token 字符串"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-ltju5s3",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-ltju5s3",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.6.1 检测登录表单的数据是否合法"
				}
			]
		},
		{
			"ID": "20221012204620-svcqfj5",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-svcqfj5",
				"updated": "20221012235030"
			},
			"Children": [
				{
					"ID": "20221012204620-4t830hl",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-4t830hl",
						"updated": "20221012235030"
					},
					"Children": [
						{
							"ID": "20221012204620-4of4vha",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-4of4vha",
								"updated": "20221012235030"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "将"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/user.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "登录"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由代码修改如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-o8kli0c",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-o8kli0c",
				"updated": "20221012235035"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 登录的路由\nrouter.post('/login', expressJoi(reg_login_schema), userHandler.login)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-o9e5ita",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-o9e5ita",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.6.2 根据用户名查询用户的数据"
				}
			]
		},
		{
			"ID": "20221012204620-b0ol3tm",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-b0ol3tm",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-vad97uk",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-vad97uk",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-dyzx93r",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-dyzx93r",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "接收表单数据："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-bfp4vn3",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-bfp4vn3",
				"updated": "20221012235039"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const userinfo = req.body\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-ru5tshv",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ru5tshv",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-ucey5mq",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-ucey5mq",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-bgp6xuq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-bgp6xuq",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-ad3o2zk",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-ad3o2zk",
				"updated": "20221012235045"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const sql = `select * from ev_users where username=?`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-756s2z1",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-756s2z1",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-j6uh7kh",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-j6uh7kh",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-rpfismt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-rpfismt",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "执行 SQL 语句，查询用户的数据："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-mr5c3z1",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-mr5c3z1",
				"updated": "20221012235042"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.query(sql, userinfo.username, function (err, results) {\n  // 执行 SQL 语句失败\n  if (err) return res.cc(err)\n  // 执行 SQL 语句成功，但是查询到数据条数不等于 1\n  if (results.length !== 1) return res.cc('登录失败！')\n  // TODO：判断用户输入的登录密码是否和数据库中的密码一致\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-f8dclcm",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-f8dclcm",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.6.3 判断用户输入的密码是否正确"
				}
			]
		},
		{
			"ID": "20221012204620-r2s9egh",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-r2s9egh",
				"updated": "20221013111035"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-tox8mpg",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-tox8mpg",
						"updated": "20221013111035"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "核心实现思路：调用"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "bcrypt.compareSync(用户提交的密码, 数据库中的密码)"
						},
						{
							"Type": "NodeText",
							"Data": "​ 方法比较密码是否一致"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-0swsom6",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-0swsom6",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-396khj0",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-396khj0",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "返回值是布尔值（true 一致、false 不一致）"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-yv3c34e",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221012204620-yv3c34e",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "具体的实现代码如下："
				}
			]
		},
		{
			"ID": "20221012204620-irk3r2y",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-irk3r2y",
				"updated": "20221012235048"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 拿着用户输入的密码,和数据库中存储的密码进行对比\nconst compareResult = bcrypt.compareSync(userinfo.password, results[0].password)\n​\n// 如果对比的结果等于 false, 则证明用户输入的密码错误\nif (!compareResult) {\n  return res.cc('登录失败！')\n}\n​\n// TODO：登录成功，生成 Token 字符串\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-89ndw0q",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-89ndw0q",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.6.4 生成 JWT 的 Token 字符串"
				}
			]
		},
		{
			"ID": "20221012204620-axjio2w",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-axjio2w",
				"updated": "20221013110822"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-q83x02p",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-q83x02p",
						"updated": "20221013110822"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "核心注意点：在生成 Token 字符串的时候，一定要剔除密码"
						},
						{
							"Type": "NodeText",
							"Data": " 和 "
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "头像"
						},
						{
							"Type": "NodeText",
							"Data": " 的值"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-7xnx0ik",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-7xnx0ik",
				"updated": "20221013110828"
			},
			"Children": [
				{
					"ID": "20221012204620-vzom3tf",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-vzom3tf",
						"updated": "20221013110828"
					},
					"Children": [
						{
							"ID": "20221012204620-eobxwen",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-eobxwen",
								"updated": "20221013110828"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "通过 ES6 的高级语法，快速剔除"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "密码"
								},
								{
									"Type": "NodeText",
									"Data": "​ 和 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "头像"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的值："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-37nrvgv",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-37nrvgv",
				"updated": "20221012235051"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 剔除完毕之后，user 中只保留了用户的 id, username, nickname, email 这四个属性的值\nconst user = { ...results[0], password: '', user_pic: '' }\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-sq3ebx9",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-sq3ebx9",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-mzbfosk",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-mzbfosk",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-ouykzy9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ouykzy9",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "运行如下的命令，安装生成 Token 字符串的包："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-rj1atv6",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-rj1atv6",
				"updated": "20221012235053"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "npm i jsonwebtoken@8.5.1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-nfr5ysb",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-nfr5ysb",
				"updated": "20221013110855"
			},
			"Children": [
				{
					"ID": "20221012204620-awratwc",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-awratwc",
						"updated": "20221013110855"
					},
					"Children": [
						{
							"ID": "20221012204620-urgsje1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-urgsje1",
								"updated": "20221013110855"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/user.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块的头部区域，导入 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "jsonwebtoken"
								},
								{
									"Type": "NodeText",
									"Data": "​ 包："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-m2q46n6",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-m2q46n6",
				"updated": "20221012235056"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 用这个包来生成 Token 字符串\nconst jwt = require('jsonwebtoken')\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-u8o4xor",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-u8o4xor",
				"updated": "20221013111412"
			},
			"Children": [
				{
					"ID": "20221012204620-ln8fjt7",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-ln8fjt7",
						"updated": "20221013111412"
					},
					"Children": [
						{
							"ID": "20221012204620-govqlk8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-govqlk8",
								"updated": "20221013111412"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "创建"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "config.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 文件，并向外共享 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "加密"
								},
								{
									"Type": "NodeText",
									"Data": " 和 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "还原"
								},
								{
									"Type": "NodeText",
									"Data": " Token 的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "jwtSecretKey"
								},
								{
									"Type": "NodeText",
									"Data": "​ 字符串："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-0in2x9b",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-0in2x9b",
				"updated": "20221012235100"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "module.exports = {\n  jwtSecretKey: 'itheima No1. ^_^',\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-n7zi54x",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-n7zi54x",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-zz4gqn7",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20221012204620-zz4gqn7",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-7z19n7n",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-7z19n7n",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "将用户信息对象加密成 Token 字符串："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-692fenr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-692fenr",
				"updated": "20221012235103"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入配置文件\nconst config = require('../config')\n​\n// 生成 Token 字符串\nconst tokenStr = jwt.sign(user, config.jwtSecretKey, {\n  expiresIn: '10h', // token 有效期为 10 个小时\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-p7deo6p",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-p7deo6p",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-lj7coh3",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ni4=",
						"Num": 6
					},
					"Properties": {
						"id": "20221012204620-lj7coh3",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-d0vqvq3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-d0vqvq3",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "将生成的 Token 字符串响应给客户端："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-lp0x1ti",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-lp0x1ti",
				"updated": "20221012235106"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "res.send({\n  status: 0,\n  message: '登录成功！',\n  // 为了方便客户端使用 Token，在服务器端直接拼接上 Bearer 的前缀\n  token: 'Bearer ' + tokenStr,\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-6wijkma",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-6wijkma",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.7 配置解析 Token 的中间件"
				}
			]
		},
		{
			"ID": "20221012204620-cmxub0u",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-cmxub0u",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-g4fdz5q",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-g4fdz5q",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-bkzgfs3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-bkzgfs3",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "运行如下的命令，安装解析 Token 的中间件："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-y8xwh8w",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-y8xwh8w",
				"updated": "20221012235108"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "npm i express-jwt@5.3.3\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-rpowd97",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-rpowd97",
				"updated": "20221013112210"
			},
			"Children": [
				{
					"ID": "20221012204620-e0aizq5",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-e0aizq5",
						"updated": "20221013112210"
					},
					"Children": [
						{
							"ID": "20221012204620-e8ijgg7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-e8ijgg7",
								"updated": "20221013112210"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中注册路由之前，配置解析 Token 的中间件："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-6dgeven",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-6dgeven",
				"updated": "20221012235113"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入配置文件\nconst config = require('./config')\n​\n// 解析 token 的中间件\nconst expressJWT = require('express-jwt')\n​\n// 使用 .unless({ path: [/^\\/api\\//] }) 指定哪些接口不需要进行 Token 的身份认证\napp.use(expressJWT({ secret: config.jwtSecretKey }).unless({ path: [/^\\/api\\//] }))\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-3y0u7ca",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-3y0u7ca",
				"updated": "20221013112318"
			},
			"Children": [
				{
					"ID": "20221012204620-ye43t54",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-ye43t54",
						"updated": "20221013112318"
					},
					"Children": [
						{
							"ID": "20221012204620-phuw1hs",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-phuw1hs",
								"updated": "20221013112318"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "错误级别中间件"
								},
								{
									"Type": "NodeText",
									"Data": "​ 里面，捕获并处理 Token 认证失败后的错误："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-jdk011i",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-jdk011i",
				"updated": "20221012235117"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 错误中间件\napp.use(function (err, req, res, next) {\n  // 省略其它代码...\n​\n  // 捕获身份认证失败的错误\n  if (err.name === 'UnauthorizedError') return res.cc('身份认证失败！')\n​\n  // 未知错误...\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-vn7bvgf",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221012204620-vn7bvgf",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3. 个人中心"
				}
			]
		},
		{
			"ID": "20221012204620-wgxymzf",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-wgxymzf",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.1 获取用户的基本信息"
				}
			]
		},
		{
			"ID": "20221012204620-zmvsg74",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-zmvsg74",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.1.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-0qzsbnr",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-0qzsbnr",
				"updated": "20221013115948"
			},
			"Children": [
				{
					"ID": "20221012204620-csclzqv",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-csclzqv",
						"updated": "20221013115947"
					},
					"Children": [
						{
							"ID": "20221012204620-jja4ud4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-jja4ud4",
								"updated": "20221013115947"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "初始化路由"
								},
								{
									"Type": "NodeText",
									"Data": " 模块"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-kzxgm9u",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-kzxgm9u",
						"updated": "20221013115948"
					},
					"Children": [
						{
							"ID": "20221012204620-7ubmxh3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-7ubmxh3",
								"updated": "20221013115948"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "初始化路由处理函数"
								},
								{
									"Type": "NodeText",
									"Data": " 模块"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-3jt8vye",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-3jt8vye",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-3c81ggp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-3c81ggp",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "获取用户的基本信息"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-brdpx7d",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-brdpx7d",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.1.1 初始化路由模块"
				}
			]
		},
		{
			"ID": "20221012204620-sgowsko",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-sgowsko",
				"updated": "20221013120004"
			},
			"Children": [
				{
					"ID": "20221012204620-i95nsbh",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-i95nsbh",
						"updated": "20221013120004"
					},
					"Children": [
						{
							"ID": "20221012204620-8kio5r2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-8kio5r2",
								"updated": "20221013120004"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "创建"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 路由模块，并初始化如下的代码结构："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-ps210nk",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-ps210nk",
				"updated": "20221012235121"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入 express\nconst express = require('express')\n// 创建路由对象\nconst router = express.Router()\n​\n// 获取用户的基本信息\nrouter.get('/userinfo', (req, res) =\u003e {\n  res.send('ok')\n})\n​\n// 向外共享路由对象\nmodule.exports = router\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-oqs5lfd",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-oqs5lfd",
				"updated": "20221013120040"
			},
			"Children": [
				{
					"ID": "20221012204620-jomf1tc",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-jomf1tc",
						"updated": "20221013120040"
					},
					"Children": [
						{
							"ID": "20221012204620-gmeevmv",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-gmeevmv",
								"updated": "20221013120040"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中导入并使用个人中心的路由模块："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-c5pgiip",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-c5pgiip",
				"updated": "20221012235125"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入并使用用户信息路由模块\nconst userinfoRouter = require('./router/userinfo')\n// 注意：以 /my 开头的接口，都是有权限的接口，需要进行 Token 身份认证\napp.use('/my', userinfoRouter)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-u7igt8p",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-u7igt8p",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.1.2 初始化路由处理函数模块"
				}
			]
		},
		{
			"ID": "20221012204620-e9fgr0y",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-e9fgr0y",
				"updated": "20221013120108"
			},
			"Children": [
				{
					"ID": "20221012204620-akfgtjr",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-akfgtjr",
						"updated": "20221013120108"
					},
					"Children": [
						{
							"ID": "20221012204620-3aiydi5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-3aiydi5",
								"updated": "20221013120108"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "创建"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 路由处理函数模块，并初始化如下的代码结构："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-s8lcnwl",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-s8lcnwl",
				"updated": "20221012235128"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 获取用户基本信息的处理函数\nexports.getUserInfo = (req, res) =\u003e {\n  res.send('ok')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-7tb1mgq",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-7tb1mgq",
				"updated": "20221013120248"
			},
			"Children": [
				{
					"ID": "20221012204620-jc82djy",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-jc82djy",
						"updated": "20221013120248"
					},
					"Children": [
						{
							"ID": "20221012204620-xfwledn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-xfwledn",
								"updated": "20221013120248"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "修改"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中的代码如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-pqrnzrf",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-pqrnzrf",
				"updated": "20221012235130"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const express = require('express')\nconst router = express.Router()\n\n// 导入用户信息的处理函数模块\nconst userinfo_handler = require('../router_handler/userinfo')\n\n// 获取用户的基本信息\nrouter.get('/userinfo', userinfo_handler.getUserInfo)\n\nmodule.exports = router\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-10cpf8w",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-10cpf8w",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.1.3 获取用户的基本信息"
				}
			]
		},
		{
			"ID": "20221012204620-wr1zwoz",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-wr1zwoz",
				"updated": "20221013120147"
			},
			"Children": [
				{
					"ID": "20221012204620-xa2fvuf",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-xa2fvuf",
						"updated": "20221013120147"
					},
					"Children": [
						{
							"ID": "20221012204620-fmkcg32",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-fmkcg32",
								"updated": "20221013120147"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 头部导入数据库操作模块："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-40ics3y",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-40ics3y",
				"updated": "20221012235133"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入数据库操作模块\nconst db = require('../db/index')\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-9qy8jcu",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-9qy8jcu",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-w2byd2a",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-w2byd2a",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-p8qs7mb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-p8qs7mb",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-mnz65pr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-mnz65pr",
				"updated": "20221012235135"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 根据用户的 id，查询用户的基本信息\n// 注意：为了防止用户的密码泄露，需要排除 password 字段\nconst sql = `select id, username, nickname, email, user_pic from ev_users where id=?`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-z6u02qb",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-z6u02qb",
				"updated": "20221013120340"
			},
			"Children": [
				{
					"ID": "20221012204620-qmubc40",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-qmubc40",
						"updated": "20221013120340"
					},
					"Children": [
						{
							"ID": "20221012204620-09ihf1g",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-09ihf1g",
								"updated": "20221013120340"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "调用"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-htv8ecb",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-htv8ecb",
				"updated": "20221012235138"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 注意：req 对象上的 user 属性，是 Token 解析成功，express-jwt 中间件帮我们挂载上去的\ndb.query(sql, req.user.id, (err, results) =\u003e {\n  // 1. 执行 SQL 语句失败\n  if (err) return res.cc(err)\n\n  // 2. 执行 SQL 语句成功，但是查询到的数据条数不等于 1\n  if (results.length !== 1) return res.cc('获取用户信息失败！')\n\n  // 3. 将用户信息响应给客户端\n  res.send({\n    status: 0,\n    message: '获取用户基本信息成功！',\n    data: results[0],\n  })\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-dn822rn",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-dn822rn",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.2 更新用户的基本信息"
				}
			]
		},
		{
			"ID": "20221012204620-v6kcprd",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-v6kcprd",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.2.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-2djjbr1",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-2djjbr1",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-y7vfwh4",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-y7vfwh4",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-6zqxwrr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-6zqxwrr",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义路由和处理函数"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-292vbt4",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-292vbt4",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-wesdoc8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-wesdoc8",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "验证表单数据"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-580ws09",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-580ws09",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-6emji6p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-6emji6p",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "实现更新用户基本信息的功能"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-bbwk1br",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-bbwk1br",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.2.1 定义路由和处理函数"
				}
			]
		},
		{
			"ID": "20221012204620-9ptqkgx",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-9ptqkgx",
				"updated": "20221013120734"
			},
			"Children": [
				{
					"ID": "20221012204620-zto1dc5",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-zto1dc5",
						"updated": "20221013120734"
					},
					"Children": [
						{
							"ID": "20221012204620-gyfavx6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-gyfavx6",
								"updated": "20221013120734"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，新增 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "更新用户基本信息"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-r8rhe24",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-r8rhe24",
				"updated": "20221013121351"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 更新用户的基本信息\nrouter.post('/userinfo', userinfo_handler.updateUserInfo)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-p9blxpa",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-p9blxpa",
				"updated": "20221013120736"
			},
			"Children": [
				{
					"ID": "20221012204620-r92y2ri",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-r92y2ri",
						"updated": "20221013120736"
					},
					"Children": [
						{
							"ID": "20221012204620-f10llkb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-f10llkb",
								"updated": "20221013120736"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，定义并向外共享 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "更新用户基本信息"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由处理函数："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-e29sfub",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-e29sfub",
				"updated": "20221012235143"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 更新用户基本信息的处理函数\nexports.updateUserInfo = (req, res) =\u003e {\n  res.send('ok')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-mqzmtym",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-mqzmtym",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.2.2 验证表单数据"
				}
			]
		},
		{
			"ID": "20221012204620-crgrqe1",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-crgrqe1",
				"updated": "20221013121434"
			},
			"Children": [
				{
					"ID": "20221012204620-g97xm1k",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-g97xm1k",
						"updated": "20221013121434"
					},
					"Children": [
						{
							"ID": "20221012204620-oa5v5ot",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-oa5v5ot",
								"updated": "20221013121434"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/schema/user.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 验证规则模块中，定义 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "id"
								},
								{
									"Type": "NodeText",
									"Data": "​，"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "nickname"
								},
								{
									"Type": "NodeText",
									"Data": "​，"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "email"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的验证规则如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-d4m9rdm",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-d4m9rdm",
				"updated": "20221012235149"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 定义 id, nickname, emial 的验证规则\nconst id = joi.number().integer().min(1).required()\nconst nickname = joi.string().required()\nconst email = joi.string().email().required()\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-3mstxwh",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-3mstxwh",
				"updated": "20221013121443"
			},
			"Children": [
				{
					"ID": "20221012204620-5rf078k",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-5rf078k",
						"updated": "20221013121443"
					},
					"Children": [
						{
							"ID": "20221012204620-sbejdkc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-sbejdkc",
								"updated": "20221013121443"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "并使用"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "exports"
								},
								{
									"Type": "NodeText",
									"Data": "​ 向外共享如下的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "验证规则对象"
								},
								{
									"Type": "NodeText",
									"Data": "​："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-65cr8ys",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-65cr8ys",
				"updated": "20221012235151"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 验证规则对象 - 更新用户基本信息\nexports.update_userinfo_schema = {\n  body: {\n    id,\n    nickname,\n    email,\n  },\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-40qa2se",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-40qa2se",
				"updated": "20221013121521"
			},
			"Children": [
				{
					"ID": "20221012204620-53qhgkg",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-53qhgkg",
						"updated": "20221013121521"
					},
					"Children": [
						{
							"ID": "20221012204620-fojserp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-fojserp",
								"updated": "20221013121521"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，导入验证数据合法性的中间件："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-6ippzwq",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-6ippzwq",
				"updated": "20221012235154"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入验证数据合法性的中间件\nconst expressJoi = require('@escook/express-joi')\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-7b8ac8g",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-7b8ac8g",
				"updated": "20221013121603"
			},
			"Children": [
				{
					"ID": "20221012204620-q2r7c09",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-q2r7c09",
						"updated": "20221013121603"
					},
					"Children": [
						{
							"ID": "20221012204620-e4f6hgl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-e4f6hgl",
								"updated": "20221013121603"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，导入需要的验证规则对象："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-5bn2kw9",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-5bn2kw9",
				"updated": "20221012235201"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入需要的验证规则对象\nconst { update_userinfo_schema } = require('../schema/user')\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-xi5u9wp",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-xi5u9wp",
				"updated": "20221013121611"
			},
			"Children": [
				{
					"ID": "20221012204620-60j96is",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20221012204620-60j96is",
						"updated": "20221013121611"
					},
					"Children": [
						{
							"ID": "20221012204620-63ndtqb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-63ndtqb",
								"updated": "20221013121611"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，修改 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "更新用户的基本信息"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-jtiv9b9",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-jtiv9b9",
				"updated": "20221012235211"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 更新用户的基本信息\nrouter.post('/userinfo', expressJoi(update_userinfo_schema), userinfo_handler.updateUserInfo)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-j4za8iu",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-j4za8iu",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.2.3 实现更新用户基本信息的功能"
				}
			]
		},
		{
			"ID": "20221012204620-9835xnf",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-9835xnf",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-xxk9hzv",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-xxk9hzv",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-p7l0ghn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-p7l0ghn",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义待执行的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-sa7g80o",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-sa7g80o",
				"updated": "20221013121643"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const sql = `update ev_users set ? where id=?`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-g7y9v5f",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-g7y9v5f",
				"updated": "20221013121744"
			},
			"Children": [
				{
					"ID": "20221012204620-eu9xaf1",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-eu9xaf1",
						"updated": "20221013121744"
					},
					"Children": [
						{
							"ID": "20221012204620-73uro69",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-73uro69",
								"updated": "20221013121744"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "调用"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行 SQL 语句并传参："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-s6pad1k",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-s6pad1k",
				"updated": "20221013121645"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.query(sql, [req.body, req.body.id], (err, results) =\u003e {\n  // 执行 SQL 语句失败\n  if (err) return res.cc(err)\n\n  // 执行 SQL 语句成功，但影响行数不为 1\n  if (results.affectedRows !== 1) return res.cc('修改用户基本信息失败！')\n\n  // 修改用户信息成功\n  return res.cc('修改用户基本信息成功！', 0)\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-w07eyrp",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-w07eyrp",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.3 重置密码"
				}
			]
		},
		{
			"ID": "20221012204620-ukmvx8u",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-ukmvx8u",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.3.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-jp6is3k",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-jp6is3k",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-1vkmucq",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-1vkmucq",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-qvbhkl0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-qvbhkl0",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义路由和处理函数"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-9flsqdu",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-9flsqdu",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-0vw7cp3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-0vw7cp3",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "验证表单数据"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-psas13l",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-psas13l",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-uswhooh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-uswhooh",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "实现重置密码的功能"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-e5uad7p",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-e5uad7p",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.3.1 定义路由和处理函数"
				}
			]
		},
		{
			"ID": "20221012204620-0i793wf",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-0i793wf",
				"updated": "20221013131154"
			},
			"Children": [
				{
					"ID": "20221012204620-zwad5i7",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-zwad5i7",
						"updated": "20221013131154"
					},
					"Children": [
						{
							"ID": "20221012204620-7b7fsy4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-7b7fsy4",
								"updated": "20221013131154"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，新增 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "重置密码"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-1f33p7e",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-1f33p7e",
				"updated": "20221013131156"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 重置密码的路由\nrouter.post('/updatepwd', userinfo_handler.updatePassword)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-hejjkza",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-hejjkza",
				"updated": "20221013131259"
			},
			"Children": [
				{
					"ID": "20221012204620-2c4d7pj",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-2c4d7pj",
						"updated": "20221013131259"
					},
					"Children": [
						{
							"ID": "20221012204620-jjxgwyg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-jjxgwyg",
								"updated": "20221013131259"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，定义并向外共享 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "重置密码"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由处理函数："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-wfc0ori",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-wfc0ori",
				"updated": "20221013131158"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 重置密码的处理函数\nexports.updatePassword = (req, res) =\u003e {\n  res.send('ok')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-scjzzn5",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-scjzzn5",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.3.2 验证表单数据"
				}
			]
		},
		{
			"ID": "20221012204620-un4kj4p",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-un4kj4p",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-2sgytru",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-2sgytru",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "核心验证思路：旧密码与新密码，必须符合密码的验证规则，并且新密码不能与旧密码一致！"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-9bk767a",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-9bk767a",
				"updated": "20221013131320"
			},
			"Children": [
				{
					"ID": "20221012204620-rf7t2fo",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-rf7t2fo",
						"updated": "20221013131320"
					},
					"Children": [
						{
							"ID": "20221012204620-jrd9799",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-jrd9799",
								"updated": "20221013131320"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/schema/user.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，使用 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "exports"
								},
								{
									"Type": "NodeText",
									"Data": "​ 向外共享如下的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "验证规则对象"
								},
								{
									"Type": "NodeText",
									"Data": "​："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-8wcined",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-8wcined",
				"updated": "20221013131204"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 验证规则对象 - 重置密码\nexports.update_password_schema = {\n  body: {\n    // 使用 password 这个规则，验证 req.body.oldPwd 的值\n    oldPwd: password,\n    // 使用 joi.not(joi.ref('oldPwd')).concat(password) 规则，验证 req.body.newPwd 的值\n    // 解读：\n    // 1. joi.ref('oldPwd') 表示 newPwd 的值必须和 oldPwd 的值保持一致\n    // 2. joi.not(joi.ref('oldPwd')) 表示 newPwd 的值不能等于 oldPwd 的值\n    // 3. .concat() 用于合并 joi.not(joi.ref('oldPwd')) 和 password 这两条验证规则\n    newPwd: joi.not(joi.ref('oldPwd')).concat(password),\n  },\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-ovuggef",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ovuggef",
				"updated": "20221013131422"
			},
			"Children": [
				{
					"ID": "20221012204620-sqc6v3e",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-sqc6v3e",
						"updated": "20221013131422"
					},
					"Children": [
						{
							"ID": "20221012204620-h4ef2yn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-h4ef2yn",
								"updated": "20221013131422"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，导入需要的验证规则对象："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-wz68yao",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-wz68yao",
				"updated": "20221013131211"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入需要的验证规则对象\nconst { update_userinfo_schema, update_password_schema } = require('../schema/user')\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-8oj5ipo",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-8oj5ipo",
				"updated": "20221013131507"
			},
			"Children": [
				{
					"ID": "20221012204620-8lht69q",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-8lht69q",
						"updated": "20221013131507"
					},
					"Children": [
						{
							"ID": "20221012204620-9z83j23",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-9z83j23",
								"updated": "20221013131507"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "并在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "重置密码的路由"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中，使用 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "update_password_schema"
								},
								{
									"Type": "NodeText",
									"Data": "​ 规则验证表单的数据，示例代码如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-vy4v85p",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-vy4v85p",
				"updated": "20221013131214"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "router.post('/updatepwd', expressJoi(update_password_schema), userinfo_handler.updatePassword)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-oacd959",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-oacd959",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.3.3 实现重置密码的功能"
				}
			]
		},
		{
			"ID": "20221012204620-ljfwsqy",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ljfwsqy",
				"updated": "20221013131533"
			},
			"Children": [
				{
					"ID": "20221012204620-ptxtiq6",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-ptxtiq6",
						"updated": "20221013131533"
					},
					"Children": [
						{
							"ID": "20221012204620-xz34lfr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-xz34lfr",
								"updated": "20221013131533"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "根据"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "id"
								},
								{
									"Type": "NodeText",
									"Data": "​ 查询用户是否存在："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-zymtza0",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-zymtza0",
				"updated": "20221013131216"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 定义根据 id 查询用户数据的 SQL 语句\nconst sql = `select * from ev_users where id=?`\n​\n// 执行 SQL 语句查询用户是否存在\ndb.query(sql, req.user.id, (err, results) =\u003e {\n  // 执行 SQL 语句失败\n  if (err) return res.cc(err)\n​\n  // 检查指定 id 的用户是否存在\n  if (results.length !== 1) return res.cc('用户不存在！')\n​\n  // TODO：判断提交的旧密码是否正确\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-5c1bhrn",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-5c1bhrn",
				"updated": "20221013131557"
			},
			"Children": [
				{
					"ID": "20221012204620-p1gouhq",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-p1gouhq",
						"updated": "20221013131557"
					},
					"Children": [
						{
							"ID": "20221012204620-zud6358",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-zud6358",
								"updated": "20221013131557"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "判断提交的旧密码"
								},
								{
									"Type": "NodeText",
									"Data": " 是否正确："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-ho9gsy1",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-ho9gsy1",
				"updated": "20221013131218"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 在头部区域导入 bcryptjs 后，\n// 即可使用 bcrypt.compareSync(提交的密码，数据库中的密码) 方法验证密码是否正确\n// compareSync() 函数的返回值为布尔值，true 表示密码正确，false 表示密码错误\nconst bcrypt = require('bcryptjs')\n\n// 判断提交的旧密码是否正确\nconst compareResult = bcrypt.compareSync(req.body.oldPwd, results[0].password)\nif (!compareResult) return res.cc('原密码错误！')\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-3pl2a0q",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-3pl2a0q",
				"updated": "20221013131624"
			},
			"Children": [
				{
					"ID": "20221012204620-kwlvr0i",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-kwlvr0i",
						"updated": "20221013131624"
					},
					"Children": [
						{
							"ID": "20221012204620-5vbuc7s",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-5vbuc7s",
								"updated": "20221013131624"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "对新密码进行"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "bcrypt"
								},
								{
									"Type": "NodeText",
									"Data": "​ 加密之后，更新到数据库中："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-xdlzblm",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-xdlzblm",
				"updated": "20221013131221"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 定义更新用户密码的 SQL 语句\nconst sql = `update ev_users set password=? where id=?`\n\n// 对新密码进行 bcrypt 加密处理\nconst newPwd = bcrypt.hashSync(req.body.newPwd, 10)\n\n// 执行 SQL 语句，根据 id 更新用户的密码\ndb.query(sql, [newPwd, req.user.id], (err, results) =\u003e {\n  // SQL 语句执行失败\n  if (err) return res.cc(err)\n\n  // SQL 语句执行成功，但是影响行数不等于 1\n  if (results.affectedRows !== 1) return res.cc('更新密码失败！')\n\n  // 更新密码成功\n  res.cc('更新密码成功！', 0)\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-dx5mwao",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-dx5mwao",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.4 更新用户头像"
				}
			]
		},
		{
			"ID": "20221012204620-ov1iqoe",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-ov1iqoe",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.4.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-ym7d0j9",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ym7d0j9",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-03elex9",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-03elex9",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-ayhgu4p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ayhgu4p",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义路由和处理函数"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-uoz1z8k",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-uoz1z8k",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-irbyr7m",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-irbyr7m",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "验证表单数据"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-na524ze",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-na524ze",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-cdrtiz1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-cdrtiz1",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "实现更新用户头像的功能"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-m5swv5h",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-m5swv5h",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.4.1 定义路由和处理函数"
				}
			]
		},
		{
			"ID": "20221012204620-x1ew9rd",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-x1ew9rd",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-hg7wynt",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-hg7wynt",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-ay205zt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ay205zt",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，新增 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "更新用户头像"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-jvfqt3y",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-jvfqt3y",
				"updated": "20221013143445"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 更新用户头像的路由\nrouter.post('/update/avatar', userinfo_handler.updateAvatar)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-jkjsx33",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-jkjsx33",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-b3641fv",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-b3641fv",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-whkll8t",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-whkll8t",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，定义并向外共享 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "更新用户头像"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由处理函数："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-dnju9n1",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-dnju9n1",
				"updated": "20221013143447"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 更新用户头像的处理函数\nexports.updateAvatar = (req, res) =\u003e {\n  res.send('ok')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-26vz6et",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-26vz6et",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.4.2 验证表单数据"
				}
			]
		},
		{
			"ID": "20221012204620-6lpr669",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-6lpr669",
				"updated": "20221013143428"
			},
			"Children": [
				{
					"ID": "20221012204620-7j564pf",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-7j564pf",
						"updated": "20221013143428"
					},
					"Children": [
						{
							"ID": "20221012204620-4xhje2a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-4xhje2a",
								"updated": "20221013143428"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/schema/user.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 验证规则模块中，定义 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "avatar"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的验证规则如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-an4yhsf",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-an4yhsf",
				"updated": "20221013143450"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// dataUri() 指的是如下格式的字符串数据：\n// data:image/png;base64,VE9PTUFOWVNFQ1JFVFM=\nconst avatar = joi.string().dataUri().required()\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-ifyh3gp",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ifyh3gp",
				"updated": "20221013143455"
			},
			"Children": [
				{
					"ID": "20221012204620-o59cz7o",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-o59cz7o",
						"updated": "20221013143455"
					},
					"Children": [
						{
							"ID": "20221012204620-3d5iq1f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-3d5iq1f",
								"updated": "20221013143455"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "并使用"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "exports"
								},
								{
									"Type": "NodeText",
									"Data": "​ 向外共享如下的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "验证规则对象"
								},
								{
									"Type": "NodeText",
									"Data": "​："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-jv2wbdz",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-jv2wbdz",
				"updated": "20221013143452"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 验证规则对象 - 更新头像\nexports.update_avatar_schema = {\n  body: {\n    avatar,\n  },\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-rufplkv",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-rufplkv",
				"updated": "20221013143552"
			},
			"Children": [
				{
					"ID": "20221012204620-2id0xjg",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-2id0xjg",
						"updated": "20221013143552"
					},
					"Children": [
						{
							"ID": "20221012204620-v126mbr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-v126mbr",
								"updated": "20221013143552"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，导入需要的验证规则对象："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-amkj5us",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-amkj5us",
				"updated": "20221013143609"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const { update_avatar_schema } = require('../schema/user')\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-nskn3k4",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-nskn3k4",
				"updated": "20221013143658"
			},
			"Children": [
				{
					"ID": "20221012204620-vkv5iz5",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-vkv5iz5",
						"updated": "20221013143658"
					},
					"Children": [
						{
							"ID": "20221012204620-24f3fv1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-24f3fv1",
								"updated": "20221013143658"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/userinfo.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，修改 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "更新用户头像"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-unr1954",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-unr1954",
				"updated": "20221013143656"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "router.post('/update/avatar', expressJoi(update_avatar_schema), userinfo_handler.updateAvatar)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-aznkzug",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-aznkzug",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.4.3 实现更新用户头像的功能"
				}
			]
		},
		{
			"ID": "20221012204620-0ajeknc",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-0ajeknc",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-lttyy14",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-lttyy14",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-vgqgpxm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-vgqgpxm",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义更新用户头像的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-e3whl87",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-e3whl87",
				"updated": "20221013143737"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const sql = 'update ev_users set user_pic=? where id=?'\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-shcg04e",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-shcg04e",
				"updated": "20221013143749"
			},
			"Children": [
				{
					"ID": "20221012204620-2lfg1kh",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-2lfg1kh",
						"updated": "20221013143749"
					},
					"Children": [
						{
							"ID": "20221012204620-9kyzlj1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-9kyzlj1",
								"updated": "20221013143749"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "调用"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行 SQL 语句，更新对应用户的头像："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-cx4wbkc",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-cx4wbkc",
				"updated": "20221013143739"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.query(sql, [req.body.avatar, req.user.id], (err, results) =\u003e {\n  // 执行 SQL 语句失败\n  if (err) return res.cc(err)\n\n  // 执行 SQL 语句成功，但是影响行数不等于 1\n  if (results.affectedRows !== 1) return res.cc('更新头像失败！')\n\n  // 更新用户头像成功\n  return res.cc('更新头像成功！', 0)\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-ow4doap",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221012204620-ow4doap",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4. 文章分类管理"
				}
			]
		},
		{
			"ID": "20221012204620-j4wh6i3",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-j4wh6i3",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.1 新建 ev_article_cate 表"
				}
			]
		},
		{
			"ID": "20221012204620-kmolr8s",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-kmolr8s",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.1.1 创建表结构"
				}
			]
		},
		{
			"ID": "20221013144255-mb5tujm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221013144255-mb5tujm",
				"updated": "20221013144320"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20221013144320-p7t0qtm.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20221012204620-j6dle5k",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-j6dle5k",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.1.2 新增两条初始数据"
				}
			]
		},
		{
			"ID": "20221012204620-vevs8kg",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-vevs8kg",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2 获取文章分类列表"
				}
			]
		},
		{
			"ID": "20221012204620-c9r18zo",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-c9r18zo",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-cd71juy",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-cd71juy",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-ijpr1na",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-ijpr1na",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-ts951jg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ts951jg",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "初始化路由模块"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-q5ltyoz",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-q5ltyoz",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-seiff6i",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-seiff6i",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "初始化路由处理函数模块"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-mzoe2vh",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-mzoe2vh",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-5ywjp1y",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-5ywjp1y",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "获取文章分类列表数据"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-bavvsw6",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-bavvsw6",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2.1 初始化路由模块"
				}
			]
		},
		{
			"ID": "20221012204620-1f7biow",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-1f7biow",
				"updated": "20221013143805"
			},
			"Children": [
				{
					"ID": "20221012204620-d0otl1o",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-d0otl1o",
						"updated": "20221013143805"
					},
					"Children": [
						{
							"ID": "20221012204620-b674wlw",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-b674wlw",
								"updated": "20221013143805"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "创建"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 路由模块，并初始化如下的代码结构："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-6x1au6q",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-6x1au6q",
				"updated": "20221013143924"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入 express\nconst express = require('express')\n// 创建路由对象\nconst router = express.Router()\n\n// 获取文章分类的列表数据\nrouter.get('/cates', (req, res) =\u003e {\n  res.send('ok')\n})\n\n// 向外共享路由对象\nmodule.exports = router\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-25ooiia",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-25ooiia",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-0ohri4p",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-0ohri4p",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-xhdh89v",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-xhdh89v",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中导入并使用文章分类的路由模块："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-7k5ojgx",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-7k5ojgx",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入并使用文章分类路由模块\nconst artCateRouter = require('./router/artcate')\n// 为文章分类的路由挂载统一的访问前缀 /my/article\napp.use('/my/article', artCateRouter)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-gzzylrp",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-gzzylrp",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2.2 初始化路由处理函数模块"
				}
			]
		},
		{
			"ID": "20221012204620-snn2j97",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-snn2j97",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-bju9tew",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-bju9tew",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-0rzh2zj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-0rzh2zj",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**创建 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 路由处理函数模块，并初始化如下的代码结构："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-ynsprgp",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-ynsprgp",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 获取文章分类列表数据的处理函数\nexports.getArticleCates = (req, res) =\u003e {\n  res.send('ok')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-h60s4yc",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-h60s4yc",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-gbxnful",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-gbxnful",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-cve98j0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-cve98j0",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**修改 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中的代码如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-ksgdwh7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-ksgdwh7",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const express = require('express')\nconst router = express.Router()\n​\n// 导入文章分类的路由处理函数模块\nconst artcate_handler = require('../router_handler/artcate')\n​\n// 获取文章分类的列表数据\nrouter.get('/cates', artcate_handler.getArticleCates)\n​\nmodule.exports = router\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-ql0cy6q",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-ql0cy6q",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2.3 获取文章分类列表数据"
				}
			]
		},
		{
			"ID": "20221012204620-jcmu6jo",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-jcmu6jo",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-aso2yas",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-aso2yas",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-ou9cqhw",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ou9cqhw",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 头部导入数据库操作模块："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-t7luxjc",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-t7luxjc",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入数据库操作模块\nconst db = require('../db/index')\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-3wfxp2c",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-3wfxp2c",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-9ff5icc",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-9ff5icc",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-dhusj9t",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-dhusj9t",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-qbi81i7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-qbi81i7",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 根据分类的状态，获取所有未被删除的分类列表数据\n// is_delete 为 0 表示没有被 标记为删除 的数据\nconst sql = 'select * from ev_article_cate where is_delete=0 order by id asc'\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-wt5zh4n",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-wt5zh4n",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-1yeunak",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-1yeunak",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-j5deuua",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-j5deuua",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**调用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-a1s8zfu",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-a1s8zfu",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.query(sql, (err, results) =\u003e {\n  // 1. 执行 SQL 语句失败\n  if (err) return res.cc(err)\n\n  // 2. 执行 SQL 语句成功\n  res.send({\n    status: 0,\n    message: '获取文章分类列表成功！',\n    data: results,\n  })\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-hl9daw4",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-hl9daw4",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.3 新增文章分类"
				}
			]
		},
		{
			"ID": "20221012204620-508fmho",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-508fmho",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.3.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-wh9gfih",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-wh9gfih",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-slkduns",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-slkduns",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-b9cjox3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-b9cjox3",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义路由和处理函数"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-esvqnew",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-esvqnew",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-c4qghrn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-c4qghrn",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "验证表单数据"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-umvmgg4",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-umvmgg4",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-8idiidu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-8idiidu",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**查询 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "分类名称"
								},
								{
									"Type": "NodeText",
									"Data": "​ 与 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "分类别名"
								},
								{
									"Type": "NodeText",
									"Data": "​ 是否被占用"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-68yh2xc",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-68yh2xc",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-wi1y1hi",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-wi1y1hi",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "实现新增文章分类的功能"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-thxg57h",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-thxg57h",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.3.1 定义路由和处理函数"
				}
			]
		},
		{
			"ID": "20221012204620-h02t879",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-h02t879",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-g9of5jp",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-g9of5jp",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-5fanozx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-5fanozx",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，添加 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "新增文章分类"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-fsqx8ad",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-fsqx8ad",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 新增文章分类的路由\nrouter.post('/addcates', artcate_handler.addArticleCates)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-i05inio",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-i05inio",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-b6oqduk",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-b6oqduk",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-321ay95",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-321ay95",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，定义并向外共享 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "新增文章分类"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由处理函数："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-4dnw5ik",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-4dnw5ik",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 新增文章分类的处理函数\nexports.addArticleCates = (req, res) =\u003e {\n  res.send('ok')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-dz4136j",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-dz4136j",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.3.2 验证表单数据"
				}
			]
		},
		{
			"ID": "20221012204620-vnoqq41",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-vnoqq41",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-quqlnl1",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-quqlnl1",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-hmqzahs",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-hmqzahs",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**创建 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/schema/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 文章分类数据验证模块，并定义如下的验证规则："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-2e8bcgh",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-2e8bcgh",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入定义验证规则的模块\nconst joi = require('@hapi/joi')\n\n// 定义 分类名称 和 分类别名 的校验规则\nconst name = joi.string().required()\nconst alias = joi.string().alphanum().required()\n\n// 校验规则对象 - 添加分类\nexports.add_cate_schema = {\n  body: {\n    name,\n    alias,\n  },\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-oxkodu9",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-oxkodu9",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-gb6nzfi",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-gb6nzfi",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-da60amx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-da60amx",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，使用 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "add_cate_schema"
								},
								{
									"Type": "NodeText",
									"Data": "​ 对数据进行验证："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-8ugh24x",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-8ugh24x",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入验证数据的中间件\nconst expressJoi = require('@escook/express-joi')\n// 导入文章分类的验证模块\nconst { add_cate_schema } = require('../schema/artcate')\n\n// 新增文章分类的路由\nrouter.post('/addcates', expressJoi(add_cate_schema), artcate_handler.addArticleCates)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-zsl3n4p",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-zsl3n4p",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.3.3 查询分类名称与别名是否被占用"
				}
			]
		},
		{
			"ID": "20221012204620-ei67kru",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ei67kru",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-6imwelc",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-6imwelc",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-ganwfy4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ganwfy4",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义查重的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-1vhuehn",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-1vhuehn",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 定义查询 分类名称 与 分类别名 是否被占用的 SQL 语句\nconst sql = `select * from ev_article_cate where name=? or alias=?`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-g61vzs1",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-g61vzs1",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-52579np",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-52579np",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-0slob23",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-0slob23",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**调用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行查重的操作："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-wheqrj4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-wheqrj4",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 执行查重操作\ndb.query(sql, [req.body.name, req.body.alias], (err, results) =\u003e {\n  // 执行 SQL 语句失败\n  if (err) return res.cc(err)\n\n  // 判断 分类名称 和 分类别名 是否被占用\n  if (results.length === 2) return res.cc('分类名称与别名被占用，请更换后重试！')\n  // 分别判断 分类名称 和 分类别名 是否被占用\n  if (results.length === 1 \u0026\u0026 results[0].name === req.body.name) return res.cc('分类名称被占用，请更换后重试！')\n  if (results.length === 1 \u0026\u0026 results[0].alias === req.body.alias) return res.cc('分类别名被占用，请更换后重试！')\n\n  // TODO：新增文章分类\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-tyb2wqs",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-tyb2wqs",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.3.4 实现新增文章分类的功能"
				}
			]
		},
		{
			"ID": "20221012204620-b2km3vh",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-b2km3vh",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-gqosn6x",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-gqosn6x",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-tvpn06w",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-tvpn06w",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义新增文章分类的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-fm1a9l9",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-fm1a9l9",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const sql = `insert into ev_article_cate set ?`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-j8ko4cp",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-j8ko4cp",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-b35fop2",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-b35fop2",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-5mc18e4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-5mc18e4",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**调用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行新增文章分类的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-szrpj4h",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-szrpj4h",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.query(sql, req.body, (err, results) =\u003e {\n  // SQL 语句执行失败\n  if (err) return res.cc(err)\n\n  // SQL 语句执行成功，但是影响行数不等于 1\n  if (results.affectedRows !== 1) return res.cc('新增文章分类失败！')\n\n  // 新增文章分类成功\n  res.cc('新增文章分类成功！', 0)\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-ykng1yk",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-ykng1yk",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.4 根据 Id 删除文章分类"
				}
			]
		},
		{
			"ID": "20221012204620-7hty2c8",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-7hty2c8",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.4.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-odm09nu",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-odm09nu",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-21n3e5l",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-21n3e5l",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-ma9gk4g",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ma9gk4g",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义路由和处理函数"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-rgmhqws",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-rgmhqws",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-q8rxgtp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-q8rxgtp",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "验证表单数据"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-7s7istv",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-7s7istv",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-afkp73w",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-afkp73w",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "实现删除文章分类的功能"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-pd2xcju",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-pd2xcju",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.4.1 定义路由和处理函数"
				}
			]
		},
		{
			"ID": "20221012204620-1jn4mr1",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-1jn4mr1",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-5pa4c62",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-5pa4c62",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-nxk7r0h",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-nxk7r0h",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，添加 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "删除文章分类"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-eri4ax7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-eri4ax7",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 删除文章分类的路由\nrouter.get('/deletecate/:id', artcate_handler.deleteCateById)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-tq0abh7",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-tq0abh7",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-aiwci5l",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-aiwci5l",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-m8m1sdy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-m8m1sdy",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，定义并向外共享 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "删除文章分类"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由处理函数："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-7kc7bsg",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-7kc7bsg",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 删除文章分类的处理函数\nexports.deleteCateById = (req, res) =\u003e {\n  res.send('ok')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-m26q1jq",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-m26q1jq",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.4.2 验证表单数据"
				}
			]
		},
		{
			"ID": "20221012204620-h02v5tk",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-h02v5tk",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-9w5ssu6",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-9w5ssu6",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-06bsshf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-06bsshf",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/schema/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 验证规则模块中，定义 id 的验证规则如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-r7cj6r8",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-r7cj6r8",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 定义 分类Id 的校验规则\nconst id = joi.number().integer().min(1).required()\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-fgo7oxn",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-fgo7oxn",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-sbl12ds",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-sbl12ds",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-8jzhyvt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-8jzhyvt",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**并使用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "exports"
								},
								{
									"Type": "NodeText",
									"Data": "​ 向外共享如下的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "验证规则对象"
								},
								{
									"Type": "NodeText",
									"Data": "​："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-iv0eked",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-iv0eked",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 校验规则对象 - 删除分类\nexports.delete_cate_schema = {\n  params: {\n    id,\n  },\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-vynxtro",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-vynxtro",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-3s48hj3",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-3s48hj3",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-lqd7n2l",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-lqd7n2l",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，导入需要的验证规则对象，并在路由中使用："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-9fiy0xo",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-9fiy0xo",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入删除分类的验证规则对象\nconst { delete_cate_schema } = require('../schema/artcate')\n\n// 删除文章分类的路由\nrouter.get('/deletecate/:id', expressJoi(delete_cate_schema), artcate_handler.deleteCateById)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-u145451",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-u145451",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.4.3 实现删除文章分类的功能"
				}
			]
		},
		{
			"ID": "20221012204620-mlqir3w",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-mlqir3w",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-l3vqv0e",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-l3vqv0e",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-e4tsu3a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-e4tsu3a",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义删除文章分类的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-24bk83i",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-24bk83i",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const sql = `update ev_article_cate set is_delete=1 where id=?`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-2zj33z5",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-2zj33z5",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-1v5x97v",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-1v5x97v",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-mggwbps",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-mggwbps",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**调用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行删除文章分类的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-t7a91ad",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-t7a91ad",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.query(sql, req.params.id, (err, results) =\u003e {\n  // 执行 SQL 语句失败\n  if (err) return res.cc(err)\n\n  // SQL 语句执行成功，但是影响行数不等于 1\n  if (results.affectedRows !== 1) return res.cc('删除文章分类失败！')\n\n  // 删除文章分类成功\n  res.cc('删除文章分类成功！', 0)\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-d3ofyy6",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-d3ofyy6",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.5 根据 Id 获取文章分类数据"
				}
			]
		},
		{
			"ID": "20221012204620-3yf37cz",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-3yf37cz",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.5.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-8d0bcdg",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-8d0bcdg",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-w71wx57",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-w71wx57",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-upilosr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-upilosr",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义路由和处理函数"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-r7jgrr4",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-r7jgrr4",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-oazt4s1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-oazt4s1",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "验证表单数据"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-jy2w4jt",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-jy2w4jt",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-5as85j3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-5as85j3",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "实现获取文章分类的功能"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-xgan226",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-xgan226",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.5.1 定义路由和处理函数"
				}
			]
		},
		{
			"ID": "20221012204620-v956y3h",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-v956y3h",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-kn8yo03",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-kn8yo03",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-rfovfsd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-rfovfsd",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，添加 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "根据 Id 获取文章分类"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-4jh5j15",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-4jh5j15",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "router.get('/cates/:id', artcate_handler.getArticleById)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-cxrn8nq",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-cxrn8nq",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-dkf71ri",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-dkf71ri",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-vgp7nj5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-vgp7nj5",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，定义并向外共享 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "根据 Id 获取文章分类"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由处理函数："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-ddyshei",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-ddyshei",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 根据 Id 获取文章分类的处理函数\nexports.getArticleById = (req, res) =\u003e {\n  res.send('ok')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-28o7uo9",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-28o7uo9",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.5.2 验证表单数据"
				}
			]
		},
		{
			"ID": "20221012204620-qy0da39",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-qy0da39",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-zfjhc6a",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-zfjhc6a",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-0ep7vcg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-0ep7vcg",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/schema/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 验证规则模块中，使用 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "exports"
								},
								{
									"Type": "NodeText",
									"Data": "​ 向外共享如下的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "验证规则对象"
								},
								{
									"Type": "NodeText",
									"Data": "​："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-7m3c5u9",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-7m3c5u9",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 校验规则对象 - 根据 Id 获取分类\nexports.get_cate_schema = {\n  params: {\n    id,\n  },\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-ofa7bgj",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ofa7bgj",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-crv9fcq",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-crv9fcq",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-nqasnj7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-nqasnj7",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，导入需要的验证规则对象，并在路由中使用："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-pv84o73",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-pv84o73",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入根据 Id 获取分类的验证规则对象\nconst { get_cate_schema } = require('../schema/artcate')\n​\n// 根据 Id 获取文章分类的路由\nrouter.get('/cates/:id', expressJoi(get_cate_schema), artcate_handler.getArticleById)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-pdn18eq",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-pdn18eq",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.5.3 实现获取文章分类的功能"
				}
			]
		},
		{
			"ID": "20221012204620-qzisc07",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-qzisc07",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-g2jzvt5",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-g2jzvt5",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-166tbvw",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-166tbvw",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义根据 Id 获取文章分类的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-gme30v8",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-gme30v8",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const sql = `select * from ev_article_cate where id=?`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-gtxhzzu",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-gtxhzzu",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-vpa5usp",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-vpa5usp",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-ah6mzaj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-ah6mzaj",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**调用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-bmc51bv",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-bmc51bv",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.query(sql, req.params.id, (err, results) =\u003e {\n  // 执行 SQL 语句失败\n  if (err) return res.cc(err)\n​\n  // SQL 语句执行成功，但是没有查询到任何数据\n  if (results.length !== 1) return res.cc('获取文章分类数据失败！')\n​\n  // 把数据响应给客户端\n  res.send({\n    status: 0,\n    message: '获取文章分类数据成功！',\n    data: results[0],\n  })\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-rsnlzhi",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-rsnlzhi",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.6 根据 Id 更新文章分类数据"
				}
			]
		},
		{
			"ID": "20221012204620-pzrl8e1",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-pzrl8e1",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.6.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-i4jvhfu",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-i4jvhfu",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-27tudkm",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-27tudkm",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-earl3dr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-earl3dr",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义路由和处理函数"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-7u74fk6",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-7u74fk6",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-p8w44i7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-p8w44i7",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "验证表单数据"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-jfmo3ue",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-jfmo3ue",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-qpi68t7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-qpi68t7",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**查询 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "分类名称"
								},
								{
									"Type": "NodeText",
									"Data": "​ 与 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "分类别名"
								},
								{
									"Type": "NodeText",
									"Data": "​ 是否被占用"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-z6m8u7m",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-z6m8u7m",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-h94qlx4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-h94qlx4",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "实现更新文章分类的功能"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-64xs5ee",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-64xs5ee",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.6.1 定义路由和处理函数"
				}
			]
		},
		{
			"ID": "20221012204620-f7ntjmo",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-f7ntjmo",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-zqjszj0",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-zqjszj0",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-drczt1j",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-drczt1j",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，添加 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "更新文章分类"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-1ddqiwl",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-1ddqiwl",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 更新文章分类的路由\nrouter.post('/updatecate', artcate_handler.updateCateById)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-pxqhj2i",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-pxqhj2i",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-6l746k7",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-6l746k7",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-b5rm5dt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-b5rm5dt",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，定义并向外共享 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "更新文章分类"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由处理函数："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-dcio7v0",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-dcio7v0",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 更新文章分类的处理函数\nexports.updateCateById = (req, res) =\u003e {\n  res.send('ok')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-kj03gb0",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-kj03gb0",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.6.2 验证表单数据"
				}
			]
		},
		{
			"ID": "20221012204620-1drvshq",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-1drvshq",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-m16pkdn",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-m16pkdn",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-gjs4jdq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-gjs4jdq",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/schema/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 验证规则模块中，使用 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "exports"
								},
								{
									"Type": "NodeText",
									"Data": "​ 向外共享如下的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "验证规则对象"
								},
								{
									"Type": "NodeText",
									"Data": "​："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-1o25pqk",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-1o25pqk",
				"updated": "20221012235314"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 校验规则对象 - 更新分类\nexports.update_cate_schema = {\n  body: {\n    Id: id,\n    name,\n    alias,\n  },\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-r2fsctr",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-r2fsctr",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-m4xk50m",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-m4xk50m",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-i9purpu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-i9purpu",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，导入需要的验证规则对象，并在路由中使用："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-jgtt6yc",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-jgtt6yc",
				"updated": "20221012235312"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入更新文章分类的验证规则对象\nconst { update_cate_schema } = require('../schema/artcate')\n\n// 更新文章分类的路由\nrouter.post('/updatecate', expressJoi(update_cate_schema), artcate_handler.updateCateById)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-wxjxt3t",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-wxjxt3t",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.5.4 查询分类名称与别名是否被占用"
				}
			]
		},
		{
			"ID": "20221012204620-wu8d36u",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-wu8d36u",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-7eomjq9",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-7eomjq9",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-d9b46ld",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-d9b46ld",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义查重的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-4prdoyj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-4prdoyj",
				"updated": "20221012235309"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 定义查询 分类名称 与 分类别名 是否被占用的 SQL 语句\nconst sql = `select * from ev_article_cate where Id\u003c\u003e? and (name=? or alias=?)`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-i2fjgum",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-i2fjgum",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-mdxr9g4",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-mdxr9g4",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-he0o9d7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-he0o9d7",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**调用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行查重的操作："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-rskpa88",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-rskpa88",
				"updated": "20221012235306"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "anM="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 执行查重操作\ndb.query(sql, [req.body.Id, req.body.name, req.body.alias], (err, results) =\u003e {\n  // 执行 SQL 语句失败\n  if (err) return res.cc(err)\n\n  // 判断 分类名称 和 分类别名 是否被占用\n  if (results.length === 2) return res.cc('分类名称与别名被占用，请更换后重试！')\n  if (results.length === 1 \u0026\u0026 results[0].name === req.body.name) return res.cc('分类名称被占用，请更换后重试！')\n  if (results.length === 1 \u0026\u0026 results[0].alias === req.body.alias) return res.cc('分类别名被占用，请更换后重试！')\n\n  // TODO：更新文章分类\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-qehhzte",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-qehhzte",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.5.5 实现更新文章分类的功能"
				}
			]
		},
		{
			"ID": "20221012204620-laz2yk9",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-laz2yk9",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-caevhdw",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-caevhdw",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-gxihxgv",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-gxihxgv",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义更新文章分类的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-8j07m1m",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-8j07m1m",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const sql = `update ev_article_cate set ? where Id=?`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-i33fsr6",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-i33fsr6",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-6q0ss2p",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-6q0ss2p",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-pl9nygm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-pl9nygm",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**调用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-jutdqbi",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-jutdqbi",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.query(sql, [req.body, req.body.Id], (err, results) =\u003e {\n  // 执行 SQL 语句失败\n  if (err) return res.cc(err)\n\n  // SQL 语句执行成功，但是影响行数不等于 1\n  if (results.affectedRows !== 1) return res.cc('更新文章分类失败！')\n\n  // 更新文章分类成功\n  res.cc('更新文章分类成功！')\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-6hsdmqc",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221012204620-6hsdmqc",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5. 文章管理"
				}
			]
		},
		{
			"ID": "20221012204620-8xgqkqk",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-8xgqkqk",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.1 新建 ev_articles 表"
				}
			]
		},
		{
			"ID": "20221013211727-9ushf2w",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221013211727-9ushf2w",
				"updated": "20221013211728"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20221013211728-n7nf168.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20221012204620-orz4ron",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221012204620-orz4ron",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.2 发布新文章"
				}
			]
		},
		{
			"ID": "20221012204620-lktv9wt",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-lktv9wt",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.2.0 实现步骤"
				}
			]
		},
		{
			"ID": "20221012204620-0mood1y",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-0mood1y",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-2vq3gsp",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-2vq3gsp",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-g0t9mq0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-g0t9mq0",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "初始化路由模块"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-47pan5y",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-47pan5y",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-bbhzlc4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-bbhzlc4",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "初始化路由处理函数模块"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-hg8cnal",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-hg8cnal",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-xn94ppz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-xn94ppz",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "使用 multer 解析表单数据"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-b2p6vwy",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-b2p6vwy",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-mp3uk6e",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-mp3uk6e",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "验证表单数据"
								}
							]
						}
					]
				},
				{
					"ID": "20221012204620-znud38c",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20221012204620-znud38c",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-jrt5zkk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-jrt5zkk",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "实现发布文章的功能"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-zs2e6u2",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-zs2e6u2",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.2.1 初始化路由模块"
				}
			]
		},
		{
			"ID": "20221012204620-ouuakjk",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ouuakjk",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-iqxykzn",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-iqxykzn",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-a42wd0y",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-a42wd0y",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**创建 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/article.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 路由模块，并初始化如下的代码结构："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-2ehlspk",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-2ehlspk",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入 express\nconst express = require('express')\n// 创建路由对象\nconst router = express.Router()\n\n// 发布新文章\nrouter.post('/add', (req, res) =\u003e {\n  res.send('ok')\n})\n\n// 向外共享路由对象\nmodule.exports = router\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-si4b2hp",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-si4b2hp",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-2hm6yhq",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-2hm6yhq",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-209fxue",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-209fxue",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中导入并使用文章的路由模块："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-uikuxsz",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-uikuxsz",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入并使用文章路由模块\nconst articleRouter = require('./router/article')\n// 为文章的路由挂载统一的访问前缀 /my/article\napp.use('/my/article', articleRouter)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-2hprmvs",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-2hprmvs",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.2.2 初始化路由处理函数模块"
				}
			]
		},
		{
			"ID": "20221012204620-vevz7ns",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-vevz7ns",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-rqb6bmv",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-rqb6bmv",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-xlopu2k",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-xlopu2k",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**创建 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/article.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 路由处理函数模块，并初始化如下的代码结构："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-f2ddk5k",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-f2ddk5k",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 发布新文章的处理函数\nexports.addArticle = (req, res) =\u003e {\n  res.send('ok')\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-ifhfdia",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-ifhfdia",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-jz59u2s",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-jz59u2s",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-0wpy8me",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-0wpy8me",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**修改 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/artcate.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中的代码如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-5w69a98",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-5w69a98",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const express = require('express')\nconst router = express.Router()\n​\n// 导入文章的路由处理函数模块\nconst article_handler = require('../router_handler/article')\n​\n// 发布新文章\nrouter.post('/add', article_handler.addArticle)\n​\nmodule.exports = router\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-zgltq1m",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-zgltq1m",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.2.3 使用 multer 解析表单数据"
				}
			]
		},
		{
			"ID": "20221012204620-ain2pxx",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-ain2pxx",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-1o6vtky",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-1o6vtky",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "**注意：使用 **"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "express.urlencoded()"
						},
						{
							"Type": "NodeText",
							"Data": "​ 中间件无法解析 "
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "multipart/form-"
						},
						{
							"Type": "NodeText",
							"Data": "​ 格式的请求体数据。"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-jqu7s6t",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-jqu7s6t",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-chlw6sz",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-chlw6sz",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "**当前项目，推荐使用 multer 来解析 **"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "multipart/form-"
						},
						{
							"Type": "NodeText",
							"Data": "​ 格式的表单数据。"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "a",
							"TextMarkAHref": "https://www.npmjs.com/package/multer",
							"TextMarkTextContent": "https://www.npmjs.com/package/multer"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-n2928p3",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-n2928p3",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-1wy59kv",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-1wy59kv",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-zdbyjgd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-zdbyjgd",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**运行如下的终端命令，在项目中安装 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "multer"
								},
								{
									"Type": "NodeText",
									"Data": "​："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-rmsh79n",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-rmsh79n",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "npm i multer@1.4.2\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-lb6rnb0",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-lb6rnb0",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-xrfndxw",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-xrfndxw",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-fc40ivy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-fc40ivy",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/article.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中导入并配置 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "multer"
								},
								{
									"Type": "NodeText",
									"Data": "​："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-o88p8yj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-o88p8yj",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入解析 formdata 格式表单数据的包\nconst multer = require('multer')\n// 导入处理路径的核心模块\nconst path = require('path')\n​\n// 创建 multer 的实例对象，通过 dest 属性指定文件的存放路径\nconst upload = multer({ dest: path.join(__dirname, '../uploads') })\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-5df0i3s",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-5df0i3s",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-ldaa4e3",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-ldaa4e3",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-xhhpnaq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-xhhpnaq",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**修改 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "发布新文章"
								},
								{
									"Type": "NodeText",
									"Data": "​ 的路由如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-t4hsno1",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-t4hsno1",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 发布新文章的路由\n// upload.single() 是一个局部生效的中间件，用来解析 FormData 格式的表单数据\n// 将文件类型的数据，解析并挂载到 req.file 属性中\n// 将文本类型的数据，解析并挂载到 req.body 属性中\nrouter.post('/add', upload.single('cover_img'), article_handler.addArticle)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-d7drqs6",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-d7drqs6",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-kvgfel7",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-kvgfel7",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-xls6mxw",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-xls6mxw",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/article.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "addArticle"
								},
								{
									"Type": "NodeText",
									"Data": "​ 处理函数中，将 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "multer"
								},
								{
									"Type": "NodeText",
									"Data": "​ 解析出来的数据进行打印："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-4a2964x",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-4a2964x",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 发布新文章的处理函数\nexports.addArticle = (req, res) =\u003e {\n  console.log(req.body) // 文本类型的数据\n  console.log('--------分割线----------')\n  console.log(req.file) // 文件类型的数据\n\n  res.send('ok')\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-xav56i9",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-xav56i9",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.2.4 验证表单数据"
				}
			]
		},
		{
			"ID": "20221012204620-1hbiyp9",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221012204620-1hbiyp9",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221012204620-h51yawk",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221012204620-h51yawk",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong",
							"TextMarkTextContent": "实现思路：通过 express-joi ** req.body 中的文本数据；通过 if 判断"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "strong strong",
							"TextMarkTextContent": "自动验证"
						},
						{
							"Type": "NodeText",
							"Data": "手动验证** req.file 中的文件数据；"
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-uu8nvm3",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-uu8nvm3",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-ke2ctap",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-ke2ctap",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-o3fji8a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-o3fji8a",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**创建 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/schema/article.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 验证规则模块，并初始化如下的代码结构："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-l6ranxw",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-l6ranxw",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入定义验证规则的模块\nconst joi = require('@hapi/joi')\n​\n// 定义 标题、分类Id、内容、发布状态 的验证规则\nconst title = joi.string().required()\nconst cate_id = joi.number().integer().min(1).required()\nconst content = joi.string().required().allow('')\nconst state = joi.string().valid('已发布', '草稿').required()\n​\n// 验证规则对象 - 发布文章\nexports.add_article_schema = {\n  body: {\n    title,\n    cate_id,\n    content,\n    state,\n  },\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-yolfns6",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-yolfns6",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-t9dut2u",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-t9dut2u",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-3kj7xqj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-3kj7xqj",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router/article.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中，导入需要的验证规则对象，并在路由中使用："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-30s3rbq",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-30s3rbq",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入验证数据的中间件\nconst expressJoi = require('@escook/express-joi')\n// 导入文章的验证模块\nconst { add_article_schema } = require('../schema/article')\n​\n// 发布新文章的路由\n// 注意：在当前的路由中，先后使用了两个中间件：\n//       先使用 multer 解析表单数据\n//       再使用 expressJoi 对解析的表单数据进行验证\nrouter.post('/add', upload.single('cover_img'), expressJoi(add_article_schema), article_handler.addArticle)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-17kbtlx",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-17kbtlx",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-kbzxeb6",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-kbzxeb6",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-dzuxeig",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-dzuxeig",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "/router_handler/article.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 模块中的 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "addArticle"
								},
								{
									"Type": "NodeText",
									"Data": "​ 处理函数中，通过 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "if"
								},
								{
									"Type": "NodeText",
									"Data": "​ 判断客户端是否提交了 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "封面图片"
								},
								{
									"Type": "NodeText",
									"Data": "​："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-w6m904q",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-w6m904q",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 发布新文章的处理函数\nexports.addArticle = (req, res) =\u003e {\n    // 手动判断是否上传了文章封面\n  if (!req.file || req.file.fieldname !== 'cover_img') return res.cc('文章封面是必选参数！')\n​\n  // TODO：表单数据合法，继续后面的处理流程...\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-pa2vt60",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221012204620-pa2vt60",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.2.5 实现发布文章的功能"
				}
			]
		},
		{
			"ID": "20221012204620-c2w0iev",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-c2w0iev",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-fnt55hk",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221012204620-fnt55hk",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-sutyv8y",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-sutyv8y",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "整理要插入数据库的文章信息对象："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-4bjgzcn",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-4bjgzcn",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入处理路径的 path 核心模块\nconst path = require('path')\n​\nconst articleInfo = {\n  // 标题、内容、状态、所属的分类Id\n  ...req.body,\n  // 文章封面在服务器端的存放路径\n  cover_img: path.join('/uploads', req.file.filename),\n  // 文章发布时间\n  pub_date: new Date(),\n  // 文章作者的Id\n  author_id: req.user.id,\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-4qaykbr",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-4qaykbr",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-yfd2n5s",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221012204620-yfd2n5s",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-r20spev",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-r20spev",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "定义发布文章的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-3koiorx",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-3koiorx",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "const sql = `insert into ev_articles set ?`\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-we6rsm7",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-we6rsm7",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-z3nq24z",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221012204620-z3nq24z",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-j28pyth",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-j28pyth",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**调用 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "db.query()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 执行发布文章的 SQL 语句："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-osfb14b",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-osfb14b",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 导入数据库操作模块\nconst db = require('../db/index')\n​\n// 执行 SQL 语句\ndb.query(sql, articleInfo, (err, results) =\u003e {\n  // 执行 SQL 语句失败\n  if (err) return res.cc(err)\n​\n  // 执行 SQL 语句成功，但是影响行数不等于 1\n  if (results.affectedRows !== 1) return res.cc('发布文章失败！')\n​\n  // 发布文章成功\n  res.cc('发布文章成功', 0)\n})\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012204620-fou2zjx",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221012204620-fou2zjx",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"ID": "20221012204620-eqwv864",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221012204620-eqwv864",
						"updated": "20221012204620"
					},
					"Children": [
						{
							"ID": "20221012204620-7vj59hf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221012204620-7vj59hf",
								"updated": "20221012204620"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "**在 **"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "app.js"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中，使用 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "express.static()"
								},
								{
									"Type": "NodeText",
									"Data": "​ 中间件，将 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "uploads"
								},
								{
									"Type": "NodeText",
									"Data": "​ 目录中的图片托管为静态资源："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221012204620-qijwzb7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221012204620-qijwzb7",
				"updated": "20221012204620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "// 托管静态资源文件\napp.use('/uploads', express.static('./uploads'))\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221012145133-msptxw7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221012145133-msptxw7",
				"updated": "20221012145133"
			}
		}
	]
}